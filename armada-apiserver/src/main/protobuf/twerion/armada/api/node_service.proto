syntax = "proto3";

option java_package = "net.twerion.armada.api";
option java_multiple_files = true;

import "twerion/armada/node.proto";
import "twerion/armada/ship.proto";
import "twerion/armada/filter.proto";

message FindNodeByIdRequest {}

message FindNodeResponse {}

message ListNodesRequest {
  int32 limit = 1;
}

message ListNodesByLabelRequest {
  LabelSelector selector = 1;
}

message ListNodesResponse {
  repeated Node nodes = 1;
}

message ListShipsOfNodeRequest {
  ShipLifecycleStage lifecycle_stage = 1;
  int64 limit = 2;
}

message ListShipsOfNodeResponse {
  repeated Ship ships = 1;
}

message CreateNodeRequest {

}

message CreateNodeResponse {

}

message DeleteNodeRequest {

}

message DeleteNodeResponse {

}

message NodeUpdateRequest {
  LabelSelector selector = 1;
}

message NodeUpdateResponse {}

service NodeService {

  rpc ListShipsOfNode(ListShipsOfNodeRequest) returns (ListShipsOfNodeResponse) {}

  rpc Delete(DeleteNodeRequest) returns (DeleteNodeResponse) {}

  rpc Create(CreateNodeRequest) returns (CreateNodeResponse) {}

  rpc List(ListNodesRequest) returns (ListNodesResponse) {}

  rpc ListByLabel(ListNodesByLabelRequest) returns (ListNodesResponse) {}

  rpc FindById(FindNodeByIdRequest) returns (FindNodeResponse) {}

  rpc ListenForUpdates(NodeUpdateRequest) returns (stream NodeUpdateResponse) {}
}